ai_image_gen.py

"""Minimal Flask app that serves an endpoint to generate images from a text prompt using OpenAI Images API. Deployable anywhere that can run Python.

Run locally: $ pip install flask openai python-dotenv $ export OPENAI_API_KEY="sk-..." $ python ai_image_gen.py

Then POST JSON {"prompt": "a red panda astronaut"} to http://localhost:5000/generate Returns JSON with list of image URLs. """

import os from flask import Flask, request, jsonify from openai import OpenAI, OpenAIError from dotenv import load_dotenv

load_dotenv()

OPENAI_API_KEY = os.getenv("OPENAI_API_KEY") if not OPENAI_API_KEY: raise RuntimeError("Set OPENAI_API_KEY environment variable")

client = OpenAI(api_key=OPENAI_API_KEY) app = Flask(name)

@app.route("/generate", methods=["POST"]) def generate(): data = request.get_json(force=True) prompt = data.get("prompt", "").strip() n = int(data.get("n", 4))  # number of images size = data.get("size", "512x512")

if len(prompt) < 5:
    return jsonify({"error": "Prompt too short"}), 400

try:
    resp = client.images.generate(prompt=prompt, n=n, size=size)
    images = [d.url for d in resp.data]
    return jsonify({"images": images})
except OpenAIError as e:
    return jsonify({"error": str(e)}), 500

if name == "main": app.run(debug=True, host="0.0.0.0", port=5000)


